PATH="$HOME/bin:$HOME/go/bin:/opt/homebrew/bin:~/.bun/bin:${PATH:+:${PATH}}"

# Hardcoded for performance (avoids subprocess on every shell start)
BREW_DIR="/opt/homebrew"
DOTFILES_DIR="$HOME/.dotfiles"

# Set up fd as the default source for fzf
export FZF_DEFAULT_COMMAND='fd --type f'

# Load grc aliases
# [[ -s "$BREW_DIR/etc/grc.zsh" ]] && source "$BREW_DIR/etc/grc.zsh"

# Load z
[[ -f "$BREW_DIR/etc/profile.d/z.sh" ]] && source $BREW_DIR/etc/profile.d/z.sh

# Load custom aliases
[[ -f "$HOME/.zsh_aliases" ]] && source $HOME/.zsh_aliases

# Load fzf
. "$DOTFILES_DIR/fzf/fzf.zsh"

# Load gcloud
source "$BREW_DIR/share/google-cloud-sdk/path.zsh.inc"
source "$BREW_DIR/share/google-cloud-sdk/completion.zsh.inc"

# mise
eval "$(/Users/epogue/.local/bin/mise activate zsh)"

# Consolidate all fpath modifications before compinit
fpath=(
  $HOME/.zsh/pure
  $HOME/.zsh/functions
  $HOME/.docker/completions
  $BREW_DIR/share/zsh/site-functions
  $fpath
)

# Cached compinit - only regenerate once per day
autoload -Uz compinit
if [[ -n ~/.zcompdump(#qN.mh+24) ]]; then
  compinit
else
  compinit -C
fi

# Load prompt
autoload -U promptinit; promptinit
prompt pure

# bun completions
[ -s "/Users/epogue/.bun/_bun" ] && source "/Users/epogue/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# cargo/rust
export PATH="$HOME/.cargo/bin:$PATH"

# pnpm
export PNPM_HOME="/Users/epogue/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end

# Added by Antigravity
export PATH="/Users/epogue/.antigravity/antigravity/bin:$PATH"
